(()=>{"use strict";var e,a={826:(e,a,t)=>{const r=window.wp.blocks,l=window.wp.element,s=window.wp.i18n,n=window.wp.blockEditor,d=window.wp.components;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i.apply(this,arguments)}const o=window.wp.apiFetch;var b=t.n(o);const y=window.wp.url,m=function(e){let{title:a,displayAge:t,sendMessage:r,dateFormat:d,rangeLimit:o,birthdaysOf:m,nameType:u,limit:c,emoji:h}=e;const[p,_]=(0,l.useState)([]),[g,E]=(0,l.useState)(!0),[v,f]=(0,l.useState)(null),w=(0,n.useBlockProps)();return(0,l.useEffect)((()=>{E(!0),f(null);const e=(0,y.addQueryArgs)("/buddypress-birthday/v1/birthdays",{range:o||"upcoming",limit:c||5,scope:m||"all"});b()({path:e}).then((e=>{_(e||[]),E(!1)})).catch((e=>{console.error("Error fetching birthdays:",e),f(e.message||(0,s.__)("Error loading birthdays","buddypress-birthday")),E(!1)}))}),[o,c,m]),g?(0,l.createElement)("div",i({},w,{className:"bp-birthday-loading"}),(0,s.__)("Loading birthdays...","buddypress-birthday")):v?(0,l.createElement)("div",i({},w,{className:"bp-birthday-error"}),v):(0,l.createElement)("div",i({},w,{className:"bp-birthday-block"}),a&&(0,l.createElement)("h2",{className:"bp-birthday-title"},a),p.length>0?(0,l.createElement)("ul",{className:"bp-birthday-list item-list"},p.map((e=>(0,l.createElement)("li",{key:e.user_id,className:"bp-birthday-item"},(0,l.createElement)("div",{className:"item-avatar"},(0,l.createElement)("a",{href:e.profile_url},(0,l.createElement)("img",{src:e.avatar,alt:e.name,className:"avatar"}))),(0,l.createElement)("div",{className:"item"},(0,l.createElement)("div",{className:"item-title"},(0,l.createElement)("a",{href:e.profile_url},e.name,h&&" ðŸŽ‚")),(0,l.createElement)("div",{className:"item-meta"},(0,l.createElement)("span",{className:"bp-birthday-date"},e.formatted_date||e.next_birthday),0===e.days_until&&(0,l.createElement)("span",{className:"bp-birthday-today"},(0,s.__)("Today!","buddypress-birthday")),1===e.days_until&&(0,l.createElement)("span",{className:"bp-birthday-soon"},(0,s.__)("Tomorrow","buddypress-birthday")),e.days_until>1&&(0,l.createElement)("span",{className:"bp-birthday-days"},(0,s.sprintf)((0,s.__)("in %d days","buddypress-birthday"),e.days_until)),t&&e.age>0&&(0,l.createElement)("span",{className:"bp-birthday-age"},(0,s.sprintf)((0,s.__)("Turning %d","buddypress-birthday"),e.age+1))),r&&e.message_url&&(0,l.createElement)("div",{className:"action"},(0,l.createElement)("a",{href:e.message_url,className:"button bp-birthday-message"},(0,s.__)("Send Wishes","buddypress-birthday")))))))):(0,l.createElement)("p",{className:"bp-birthday-empty"},"today"===o&&(0,s.__)("No birthdays today","buddypress-birthday"),"weekly"===o&&(0,s.__)("No birthdays this week","buddypress-birthday"),"monthly"===o&&(0,s.__)("No birthdays this month","buddypress-birthday"),(!o||"upcoming"===o)&&(0,s.__)("No upcoming birthdays","buddypress-birthday")))},u=JSON.parse('{"u2":"wbcom-designs/buddypress-birthday"}');(0,r.registerBlockType)(u.u2,{edit:function(e){let{attributes:a,setAttributes:t}=e;return(0,l.createElement)("div",(0,n.useBlockProps)(),(0,l.createElement)(n.InspectorControls,{key:"setting"},(0,l.createElement)(d.Panel,null,(0,l.createElement)(d.PanelBody,{title:(0,s.__)("Birthday Settings","buddypress-birthday")},(0,l.createElement)(d.PanelRow,null,(0,l.createElement)("p",null,(0,s.__)("Display upcoming birthdays of your members.","buddypress-birthday"))),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.TextControl,{label:(0,s.__)("Title","buddypress-birthday"),value:a.title,onChange:e=>{t({title:e})}})),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.CheckboxControl,{label:(0,s.__)("Show the age of the person","buddypress-birthday"),checked:a.displayAge,onChange:e=>{t({displayAge:e})}})),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.CheckboxControl,{label:(0,s.__)("Enable option to send birthday wishes","buddypress-birthday"),checked:a.sendMessage,onChange:e=>{t({sendMessage:e})}})),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.CheckboxControl,{label:(0,s.__)("Show birthday emoji","buddypress-birthday"),checked:a.emoji,onChange:e=>t({emoji:e})})),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.TextControl,{label:(0,s.__)("Date format","buddypress-birthday"),value:a.dateFormat,onChange:e=>{t({dateFormat:e})},help:(0,s.__)('PHP date format (e.g., F d for "January 15")',"buddypress-birthday")})),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.SelectControl,{label:(0,s.__)("Birthday range limit","buddypress-birthday"),value:a.rangeLimit,onChange:e=>{t({rangeLimit:e})},options:[{value:"upcoming",label:(0,s.__)("Upcoming (All Future)","buddypress-birthday")},{value:"today",label:(0,s.__)("Today Only","buddypress-birthday")},{value:"weekly",label:(0,s.__)("Next 7 Days","buddypress-birthday")},{value:"monthly",label:(0,s.__)("This Month","buddypress-birthday")}]})),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.SelectControl,{label:(0,s.__)("Show Birthdays of","buddypress-birthday"),value:a.birthdaysOf,onChange:e=>{t({birthdaysOf:e})},options:[{value:"all",label:(0,s.__)("All Members","buddypress-birthday")},{value:"friends",label:(0,s.__)("Friends Only","buddypress-birthday")}]})),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.SelectControl,{label:(0,s.__)("Display Name Type","buddypress-birthday"),value:a.nameType,onChange:e=>{t({nameType:e})},options:[{value:"display_name",label:(0,s.__)("Display Name","buddypress-birthday")},{value:"username",label:(0,s.__)("Username","buddypress-birthday")},{value:"full_name",label:(0,s.__)("Full Name (from xProfile)","buddypress-birthday")}]})),(0,l.createElement)(d.PanelRow,null,(0,l.createElement)(d.__experimentalNumberControl,{label:(0,s.__)("Number of birthdays to show","buddypress-birthday"),value:a.limit,onChange:e=>{t({limit:e})},min:1,max:50}))))),(0,l.createElement)(m,a))},save:function(){return null}})}},t={};function r(e){var l=t[e];if(void 0!==l)return l.exports;var s=t[e]={exports:{}};return a[e](s,s.exports,r),s.exports}r.m=a,e=[],r.O=(a,t,l,s)=>{if(!t){var n=1/0;for(b=0;b<e.length;b++){t=e[b][0],l=e[b][1],s=e[b][2];for(var d=!0,i=0;i<t.length;i++)(!1&s||n>=s)&&Object.keys(r.O).every((e=>r.O[e](t[i])))?t.splice(i--,1):(d=!1,s<n&&(n=s));if(d){e.splice(b--,1);var o=l();void 0!==o&&(a=o)}}return a}s=s||0;for(var b=e.length;b>0&&e[b-1][2]>s;b--)e[b]=e[b-1];e[b]=[t,l,s]},r.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return r.d(a,{a}),a},r.d=(e,a)=>{for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},r.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={826:0,431:0};r.O.j=a=>0===e[a];var a=(a,t)=>{var l,s,n=t[0],d=t[1],i=t[2],o=0;if(n.some((a=>0!==e[a]))){for(l in d)r.o(d,l)&&(r.m[l]=d[l]);if(i)var b=i(r)}for(a&&a(t);o<n.length;o++)s=n[o],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(b)},t=self.webpackChunkbuddypress_birthday=self.webpackChunkbuddypress_birthday||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var l=r.O(void 0,[431],(()=>r(826)));l=r.O(l)})();