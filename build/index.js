(()=>{"use strict";var e,a={826:(e,a,t)=>{const r=window.wp.blocks,l=window.wp.element,o=window.wp.i18n,s=window.wp.blockEditor,n=window.wp.components;function d(){return d=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},d.apply(this,arguments)}const i=window.wp.apiFetch;var b=t.n(i);const c=window.wp.url,y=function(e){let{title:a,displayAge:t,sendMessage:r,dateFormat:n,rangeLimit:i,birthdaysOf:y,nameType:m,limit:u,emoji:h}=e;const[p,_]=(0,l.useState)([]),[f,k]=(0,l.useState)(!0),[g,E]=(0,l.useState)(null),v=(0,s.useBlockProps)();return(0,l.useEffect)((()=>{k(!0),E(null);const e=(0,c.addQueryArgs)("/buddypress-birthday/v1/birthdays",{range:i||"upcoming",limit:u||5,scope:y||"all"});b()({path:e}).then((e=>{_(e||[]),k(!1)})).catch((e=>{console.error("Error fetching birthdays:",e),E(e.message||(0,o.__)("Error loading birthdays","birthday-block-for-buddypress")),k(!1)}))}),[i,u,y]),f?(0,l.createElement)("div",d({},v,{className:"bp-birthday-loading"}),(0,o.__)("Loading birthdays...","birthday-block-for-buddypress")):g?(0,l.createElement)("div",d({},v,{className:"bp-birthday-error"}),g):(0,l.createElement)("div",d({},v,{className:"bp-birthday-block"}),a&&(0,l.createElement)("h2",{className:"bp-birthday-title"},a),p.length>0?(0,l.createElement)("ul",{className:"bp-birthday-list item-list"},p.map((e=>(0,l.createElement)("li",{key:e.user_id,className:"bp-birthday-item"},(0,l.createElement)("div",{className:"item-avatar"},(0,l.createElement)("a",{href:e.profile_url},(0,l.createElement)("img",{src:e.avatar,alt:e.name,className:"avatar"}))),(0,l.createElement)("div",{className:"item"},(0,l.createElement)("div",{className:"item-title"},(0,l.createElement)("a",{href:e.profile_url},e.name,h&&" ðŸŽ‚")),(0,l.createElement)("div",{className:"item-meta"},(0,l.createElement)("span",{className:"bp-birthday-date"},e.formatted_date||e.next_birthday),0===e.days_until&&(0,l.createElement)("span",{className:"bp-birthday-today"},(0,o.__)("Today!","birthday-block-for-buddypress")),1===e.days_until&&(0,l.createElement)("span",{className:"bp-birthday-soon"},(0,o.__)("Tomorrow","birthday-block-for-buddypress")),e.days_until>1&&(0,l.createElement)("span",{className:"bp-birthday-days"},(0,o.sprintf)((0,o.__)("in %d days","birthday-block-for-buddypress"),e.days_until)),t&&e.age>0&&(0,l.createElement)("span",{className:"bp-birthday-age"},(0,o.sprintf)((0,o.__)("Turning %d","birthday-block-for-buddypress"),e.age+1))),r&&e.message_url&&(0,l.createElement)("div",{className:"action"},(0,l.createElement)("a",{href:e.message_url,className:"button bp-birthday-message"},(0,o.__)("Send Wishes","birthday-block-for-buddypress")))))))):(0,l.createElement)("p",{className:"bp-birthday-empty"},"today"===i&&(0,o.__)("No birthdays today","birthday-block-for-buddypress"),"weekly"===i&&(0,o.__)("No birthdays this week","birthday-block-for-buddypress"),"monthly"===i&&(0,o.__)("No birthdays this month","birthday-block-for-buddypress"),(!i||"upcoming"===i)&&(0,o.__)("No upcoming birthdays","birthday-block-for-buddypress")))},m=JSON.parse('{"u2":"wbcom-designs/buddypress-birthday"}');(0,r.registerBlockType)(m.u2,{edit:function(e){let{attributes:a,setAttributes:t}=e;return(0,l.createElement)("div",(0,s.useBlockProps)(),(0,l.createElement)(s.InspectorControls,{key:"setting"},(0,l.createElement)(n.Panel,null,(0,l.createElement)(n.PanelBody,{title:(0,o.__)("Birthday Settings","birthday-block-for-buddypress")},(0,l.createElement)(n.PanelRow,null,(0,l.createElement)("p",null,(0,o.__)("Display upcoming birthdays of your members.","birthday-block-for-buddypress"))),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.TextControl,{label:(0,o.__)("Title","birthday-block-for-buddypress"),value:a.title,onChange:e=>{t({title:e})}})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.CheckboxControl,{label:(0,o.__)("Show the age of the person","birthday-block-for-buddypress"),checked:a.displayAge,onChange:e=>{t({displayAge:e})}})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.CheckboxControl,{label:(0,o.__)("Enable option to send birthday wishes","birthday-block-for-buddypress"),checked:a.sendMessage,onChange:e=>{t({sendMessage:e})}})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.CheckboxControl,{label:(0,o.__)("Show birthday emoji","birthday-block-for-buddypress"),checked:a.emoji,onChange:e=>t({emoji:e})})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.TextControl,{label:(0,o.__)("Date format","birthday-block-for-buddypress"),value:a.dateFormat,onChange:e=>{t({dateFormat:e})},help:(0,o.__)('PHP date format (e.g., F d for "January 15")',"birthday-block-for-buddypress")})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Birthday range limit","birthday-block-for-buddypress"),value:a.rangeLimit,onChange:e=>{t({rangeLimit:e})},options:[{value:"upcoming",label:(0,o.__)("Upcoming (All Future)","birthday-block-for-buddypress")},{value:"today",label:(0,o.__)("Today Only","birthday-block-for-buddypress")},{value:"weekly",label:(0,o.__)("Next 7 Days","birthday-block-for-buddypress")},{value:"monthly",label:(0,o.__)("This Month","birthday-block-for-buddypress")}]})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Show Birthdays of","birthday-block-for-buddypress"),value:a.birthdaysOf,onChange:e=>{t({birthdaysOf:e})},options:[{value:"all",label:(0,o.__)("All Members","birthday-block-for-buddypress")},{value:"friends",label:(0,o.__)("Friends Only","birthday-block-for-buddypress")}]})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.SelectControl,{label:(0,o.__)("Display Name Type","birthday-block-for-buddypress"),value:a.nameType,onChange:e=>{t({nameType:e})},options:[{value:"display_name",label:(0,o.__)("Display Name","birthday-block-for-buddypress")},{value:"username",label:(0,o.__)("Username","birthday-block-for-buddypress")},{value:"full_name",label:(0,o.__)("Full Name (from xProfile)","birthday-block-for-buddypress")}]})),(0,l.createElement)(n.PanelRow,null,(0,l.createElement)(n.__experimentalNumberControl,{label:(0,o.__)("Number of birthdays to show","birthday-block-for-buddypress"),value:a.limit,onChange:e=>{t({limit:e})},min:1,max:50}))))),(0,l.createElement)(y,a))},save:function(){return null}})}},t={};function r(e){var l=t[e];if(void 0!==l)return l.exports;var o=t[e]={exports:{}};return a[e](o,o.exports,r),o.exports}r.m=a,e=[],r.O=(a,t,l,o)=>{if(!t){var s=1/0;for(b=0;b<e.length;b++){t=e[b][0],l=e[b][1],o=e[b][2];for(var n=!0,d=0;d<t.length;d++)(!1&o||s>=o)&&Object.keys(r.O).every((e=>r.O[e](t[d])))?t.splice(d--,1):(n=!1,o<s&&(s=o));if(n){e.splice(b--,1);var i=l();void 0!==i&&(a=i)}}return a}o=o||0;for(var b=e.length;b>0&&e[b-1][2]>o;b--)e[b]=e[b-1];e[b]=[t,l,o]},r.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return r.d(a,{a}),a},r.d=(e,a)=>{for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},r.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={826:0,431:0};r.O.j=a=>0===e[a];var a=(a,t)=>{var l,o,s=t[0],n=t[1],d=t[2],i=0;if(s.some((a=>0!==e[a]))){for(l in n)r.o(n,l)&&(r.m[l]=n[l]);if(d)var b=d(r)}for(a&&a(t);i<s.length;i++)o=s[i],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(b)},t=self.webpackChunkbirthday_block_for_buddypress=self.webpackChunkbirthday_block_for_buddypress||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var l=r.O(void 0,[431],(()=>r(826)));l=r.O(l)})();