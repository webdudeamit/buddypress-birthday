(()=>{"use strict";var e,a={826:(e,a,t)=>{const r=window.wp.blocks,s=window.wp.element,l=window.wp.i18n,n=window.wp.blockEditor,d=window.wp.components;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i.apply(this,arguments)}const o=window.wp.apiFetch;var b=t.n(o);const y=window.wp.url,m=function(e){let{title:a,displayAge:t,sendMessage:r,dateFormat:d,rangeLimit:o,birthdaysOf:m,nameType:u,limit:c,emoji:h}=e;const[p,_]=(0,s.useState)([]),[g,E]=(0,s.useState)(!0),[v,f]=(0,s.useState)(null),w=(0,n.useBlockProps)();return(0,s.useEffect)((()=>{E(!0),f(null);const e=(0,y.addQueryArgs)("/buddypress-birthday/v1/birthdays",{range:o||"upcoming",limit:c||5,scope:m||"all"});b()({path:e}).then((e=>{_(e||[]),E(!1)})).catch((e=>{console.error("Error fetching birthdays:",e),f(e.message||(0,l.__)("Error loading birthdays","buddypress-birthdays")),E(!1)}))}),[o,c,m]),g?(0,s.createElement)("div",i({},w,{className:"bp-birthday-loading"}),(0,l.__)("Loading birthdays...","buddypress-birthdays")):v?(0,s.createElement)("div",i({},w,{className:"bp-birthday-error"}),v):(0,s.createElement)("div",i({},w,{className:"bp-birthday-block"}),a&&(0,s.createElement)("h2",{className:"bp-birthday-title"},a),p.length>0?(0,s.createElement)("ul",{className:"bp-birthday-list item-list"},p.map((e=>(0,s.createElement)("li",{key:e.user_id,className:"bp-birthday-item"},(0,s.createElement)("div",{className:"item-avatar"},(0,s.createElement)("a",{href:e.profile_url},(0,s.createElement)("img",{src:e.avatar,alt:e.name,className:"avatar"}))),(0,s.createElement)("div",{className:"item"},(0,s.createElement)("div",{className:"item-title"},(0,s.createElement)("a",{href:e.profile_url},e.name,h&&" ðŸŽ‚")),(0,s.createElement)("div",{className:"item-meta"},(0,s.createElement)("span",{className:"bp-birthday-date"},e.formatted_date||e.next_birthday),0===e.days_until&&(0,s.createElement)("span",{className:"bp-birthday-today"},(0,l.__)("Today!","buddypress-birthdays")),1===e.days_until&&(0,s.createElement)("span",{className:"bp-birthday-soon"},(0,l.__)("Tomorrow","buddypress-birthdays")),e.days_until>1&&(0,s.createElement)("span",{className:"bp-birthday-days"},(0,l.sprintf)((0,l.__)("in %d days","buddypress-birthdays"),e.days_until)),t&&e.age>0&&(0,s.createElement)("span",{className:"bp-birthday-age"},(0,l.sprintf)((0,l.__)("Turning %d","buddypress-birthdays"),e.age+1))),r&&e.message_url&&(0,s.createElement)("div",{className:"action"},(0,s.createElement)("a",{href:e.message_url,className:"button bp-birthday-message"},(0,l.__)("Send Wishes","buddypress-birthdays")))))))):(0,s.createElement)("p",{className:"bp-birthday-empty"},"today"===o&&(0,l.__)("No birthdays today","buddypress-birthdays"),"weekly"===o&&(0,l.__)("No birthdays this week","buddypress-birthdays"),"monthly"===o&&(0,l.__)("No birthdays this month","buddypress-birthdays"),(!o||"upcoming"===o)&&(0,l.__)("No upcoming birthdays","buddypress-birthdays")))},u=JSON.parse('{"u2":"wbcom-designs/buddypress-birthday"}');(0,r.registerBlockType)(u.u2,{edit:function(e){let{attributes:a,setAttributes:t}=e;return(0,s.createElement)("div",(0,n.useBlockProps)(),(0,s.createElement)(n.InspectorControls,{key:"setting"},(0,s.createElement)(d.Panel,null,(0,s.createElement)(d.PanelBody,{title:(0,l.__)("Birthday Settings","buddypress-birthdays")},(0,s.createElement)(d.PanelRow,null,(0,s.createElement)("p",null,(0,l.__)("Display upcoming birthdays of your members.","buddypress-birthdays"))),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.TextControl,{label:(0,l.__)("Title","buddypress-birthdays"),value:a.title,onChange:e=>{t({title:e})}})),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.CheckboxControl,{label:(0,l.__)("Show the age of the person","buddypress-birthdays"),checked:a.displayAge,onChange:e=>{t({displayAge:e})}})),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.CheckboxControl,{label:(0,l.__)("Enable option to send birthday wishes","buddypress-birthdays"),checked:a.sendMessage,onChange:e=>{t({sendMessage:e})}})),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.CheckboxControl,{label:(0,l.__)("Show birthday emoji","buddypress-birthdays"),checked:a.emoji,onChange:e=>t({emoji:e})})),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.TextControl,{label:(0,l.__)("Date format","buddypress-birthdays"),value:a.dateFormat,onChange:e=>{t({dateFormat:e})},help:(0,l.__)('PHP date format (e.g., F d for "January 15")',"buddypress-birthdays")})),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.SelectControl,{label:(0,l.__)("Birthday range limit","buddypress-birthdays"),value:a.rangeLimit,onChange:e=>{t({rangeLimit:e})},options:[{value:"upcoming",label:(0,l.__)("Upcoming (All Future)","buddypress-birthdays")},{value:"today",label:(0,l.__)("Today Only","buddypress-birthdays")},{value:"weekly",label:(0,l.__)("Next 7 Days","buddypress-birthdays")},{value:"monthly",label:(0,l.__)("This Month","buddypress-birthdays")}]})),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.SelectControl,{label:(0,l.__)("Show Birthdays of","buddypress-birthdays"),value:a.birthdaysOf,onChange:e=>{t({birthdaysOf:e})},options:[{value:"all",label:(0,l.__)("All Members","buddypress-birthdays")},{value:"friends",label:(0,l.__)("Friends Only","buddypress-birthdays")}]})),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.SelectControl,{label:(0,l.__)("Display Name Type","buddypress-birthdays"),value:a.nameType,onChange:e=>{t({nameType:e})},options:[{value:"display_name",label:(0,l.__)("Display Name","buddypress-birthdays")},{value:"username",label:(0,l.__)("Username","buddypress-birthdays")},{value:"full_name",label:(0,l.__)("Full Name (from xProfile)","buddypress-birthdays")}]})),(0,s.createElement)(d.PanelRow,null,(0,s.createElement)(d.__experimentalNumberControl,{label:(0,l.__)("Number of birthdays to show","buddypress-birthdays"),value:a.limit,onChange:e=>{t({limit:e})},min:1,max:50}))))),(0,s.createElement)(m,a))},save:function(){return null}})}},t={};function r(e){var s=t[e];if(void 0!==s)return s.exports;var l=t[e]={exports:{}};return a[e](l,l.exports,r),l.exports}r.m=a,e=[],r.O=(a,t,s,l)=>{if(!t){var n=1/0;for(b=0;b<e.length;b++){t=e[b][0],s=e[b][1],l=e[b][2];for(var d=!0,i=0;i<t.length;i++)(!1&l||n>=l)&&Object.keys(r.O).every((e=>r.O[e](t[i])))?t.splice(i--,1):(d=!1,l<n&&(n=l));if(d){e.splice(b--,1);var o=s();void 0!==o&&(a=o)}}return a}l=l||0;for(var b=e.length;b>0&&e[b-1][2]>l;b--)e[b]=e[b-1];e[b]=[t,s,l]},r.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return r.d(a,{a}),a},r.d=(e,a)=>{for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},r.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={826:0,431:0};r.O.j=a=>0===e[a];var a=(a,t)=>{var s,l,n=t[0],d=t[1],i=t[2],o=0;if(n.some((a=>0!==e[a]))){for(s in d)r.o(d,s)&&(r.m[s]=d[s]);if(i)var b=i(r)}for(a&&a(t);o<n.length;o++)l=n[o],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(b)},t=self.webpackChunkbuddypress_birthdays=self.webpackChunkbuddypress_birthdays||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var s=r.O(void 0,[431],(()=>r(826)));s=r.O(s)})();