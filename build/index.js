(()=>{"use strict";var e,a={826:(e,a,t)=>{const l=window.wp.blocks,r=window.wp.element,s=window.wp.i18n,n=window.wp.blockEditor,d=window.wp.components;function o(){return o=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},o.apply(this,arguments)}const i=window.wp.apiFetch;var b=t.n(i);const c=window.wp.url,y=function(e){let{title:a,displayAge:t,sendMessage:l,dateFormat:d,rangeLimit:i,birthdaysOf:y,nameType:m,limit:u,emoji:h}=e;const[p,_]=(0,r.useState)([]),[k,g]=(0,r.useState)(!0),[E,v]=(0,r.useState)(null),f=(0,n.useBlockProps)();return(0,r.useEffect)((()=>{g(!0),v(null);const e=(0,c.addQueryArgs)("/buddypress-birthday/v1/birthdays",{range:i||"upcoming",limit:u||5,scope:y||"all"});b()({path:e}).then((e=>{_(e||[]),g(!1)})).catch((e=>{console.error("Error fetching birthdays:",e),v(e.message||(0,s.__)("Error loading birthdays","buddypress-birthday-block")),g(!1)}))}),[i,u,y]),k?(0,r.createElement)("div",o({},f,{className:"bp-birthday-loading"}),(0,s.__)("Loading birthdays...","buddypress-birthday-block")):E?(0,r.createElement)("div",o({},f,{className:"bp-birthday-error"}),E):(0,r.createElement)("div",o({},f,{className:"bp-birthday-block"}),a&&(0,r.createElement)("h2",{className:"bp-birthday-title"},a),p.length>0?(0,r.createElement)("ul",{className:"bp-birthday-list item-list"},p.map((e=>(0,r.createElement)("li",{key:e.user_id,className:"bp-birthday-item"},(0,r.createElement)("div",{className:"item-avatar"},(0,r.createElement)("a",{href:e.profile_url},(0,r.createElement)("img",{src:e.avatar,alt:e.name,className:"avatar"}))),(0,r.createElement)("div",{className:"item"},(0,r.createElement)("div",{className:"item-title"},(0,r.createElement)("a",{href:e.profile_url},e.name,h&&" ðŸŽ‚")),(0,r.createElement)("div",{className:"item-meta"},(0,r.createElement)("span",{className:"bp-birthday-date"},e.formatted_date||e.next_birthday),0===e.days_until&&(0,r.createElement)("span",{className:"bp-birthday-today"},(0,s.__)("Today!","buddypress-birthday-block")),1===e.days_until&&(0,r.createElement)("span",{className:"bp-birthday-soon"},(0,s.__)("Tomorrow","buddypress-birthday-block")),e.days_until>1&&(0,r.createElement)("span",{className:"bp-birthday-days"},(0,s.sprintf)((0,s.__)("in %d days","buddypress-birthday-block"),e.days_until)),t&&e.age>0&&(0,r.createElement)("span",{className:"bp-birthday-age"},(0,s.sprintf)((0,s.__)("Turning %d","buddypress-birthday-block"),e.age+1))),l&&e.message_url&&(0,r.createElement)("div",{className:"action"},(0,r.createElement)("a",{href:e.message_url,className:"button bp-birthday-message"},(0,s.__)("Send Wishes","buddypress-birthday-block")))))))):(0,r.createElement)("p",{className:"bp-birthday-empty"},"today"===i&&(0,s.__)("No birthdays today","buddypress-birthday-block"),"weekly"===i&&(0,s.__)("No birthdays this week","buddypress-birthday-block"),"monthly"===i&&(0,s.__)("No birthdays this month","buddypress-birthday-block"),(!i||"upcoming"===i)&&(0,s.__)("No upcoming birthdays","buddypress-birthday-block")))},m=JSON.parse('{"u2":"wbcom-designs/buddypress-birthday"}');(0,l.registerBlockType)(m.u2,{edit:function(e){let{attributes:a,setAttributes:t}=e;return(0,r.createElement)("div",(0,n.useBlockProps)(),(0,r.createElement)(n.InspectorControls,{key:"setting"},(0,r.createElement)(d.Panel,null,(0,r.createElement)(d.PanelBody,{title:(0,s.__)("Birthday Settings","buddypress-birthday-block")},(0,r.createElement)(d.PanelRow,null,(0,r.createElement)("p",null,(0,s.__)("Display upcoming birthdays of your members.","buddypress-birthday-block"))),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.TextControl,{label:(0,s.__)("Title","buddypress-birthday-block"),value:a.title,onChange:e=>{t({title:e})}})),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.CheckboxControl,{label:(0,s.__)("Show the age of the person","buddypress-birthday-block"),checked:a.displayAge,onChange:e=>{t({displayAge:e})}})),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.CheckboxControl,{label:(0,s.__)("Enable option to send birthday wishes","buddypress-birthday-block"),checked:a.sendMessage,onChange:e=>{t({sendMessage:e})}})),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.CheckboxControl,{label:(0,s.__)("Show birthday emoji","buddypress-birthday-block"),checked:a.emoji,onChange:e=>t({emoji:e})})),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.TextControl,{label:(0,s.__)("Date format","buddypress-birthday-block"),value:a.dateFormat,onChange:e=>{t({dateFormat:e})},help:(0,s.__)('PHP date format (e.g., F d for "January 15")',"buddypress-birthday-block")})),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.SelectControl,{label:(0,s.__)("Birthday range limit","buddypress-birthday-block"),value:a.rangeLimit,onChange:e=>{t({rangeLimit:e})},options:[{value:"upcoming",label:(0,s.__)("Upcoming (All Future)","buddypress-birthday-block")},{value:"today",label:(0,s.__)("Today Only","buddypress-birthday-block")},{value:"weekly",label:(0,s.__)("Next 7 Days","buddypress-birthday-block")},{value:"monthly",label:(0,s.__)("This Month","buddypress-birthday-block")}]})),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.SelectControl,{label:(0,s.__)("Show Birthdays of","buddypress-birthday-block"),value:a.birthdaysOf,onChange:e=>{t({birthdaysOf:e})},options:[{value:"all",label:(0,s.__)("All Members","buddypress-birthday-block")},{value:"friends",label:(0,s.__)("Friends Only","buddypress-birthday-block")}]})),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.SelectControl,{label:(0,s.__)("Display Name Type","buddypress-birthday-block"),value:a.nameType,onChange:e=>{t({nameType:e})},options:[{value:"display_name",label:(0,s.__)("Display Name","buddypress-birthday-block")},{value:"username",label:(0,s.__)("Username","buddypress-birthday-block")},{value:"full_name",label:(0,s.__)("Full Name (from xProfile)","buddypress-birthday-block")}]})),(0,r.createElement)(d.PanelRow,null,(0,r.createElement)(d.__experimentalNumberControl,{label:(0,s.__)("Number of birthdays to show","buddypress-birthday-block"),value:a.limit,onChange:e=>{t({limit:e})},min:1,max:50}))))),(0,r.createElement)(y,a))},save:function(){return null}})}},t={};function l(e){var r=t[e];if(void 0!==r)return r.exports;var s=t[e]={exports:{}};return a[e](s,s.exports,l),s.exports}l.m=a,e=[],l.O=(a,t,r,s)=>{if(!t){var n=1/0;for(b=0;b<e.length;b++){t=e[b][0],r=e[b][1],s=e[b][2];for(var d=!0,o=0;o<t.length;o++)(!1&s||n>=s)&&Object.keys(l.O).every((e=>l.O[e](t[o])))?t.splice(o--,1):(d=!1,s<n&&(n=s));if(d){e.splice(b--,1);var i=r();void 0!==i&&(a=i)}}return a}s=s||0;for(var b=e.length;b>0&&e[b-1][2]>s;b--)e[b]=e[b-1];e[b]=[t,r,s]},l.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return l.d(a,{a}),a},l.d=(e,a)=>{for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={826:0,431:0};l.O.j=a=>0===e[a];var a=(a,t)=>{var r,s,n=t[0],d=t[1],o=t[2],i=0;if(n.some((a=>0!==e[a]))){for(r in d)l.o(d,r)&&(l.m[r]=d[r]);if(o)var b=o(l)}for(a&&a(t);i<n.length;i++)s=n[i],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(b)},t=self.webpackChunkbuddypress_birthday_block=self.webpackChunkbuddypress_birthday_block||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var r=l.O(void 0,[431],(()=>l(826)));r=l.O(r)})();